[buildout]
develop = .
parts = scripts pytest omelette
find-links = http://download.gocept.com/packages/
package = gocept.amqprun
allow-picked-versions = true
show-picked-versions = true

[pytest]
recipe = zc.recipe.egg
scripts = py.test=test
test-eggs = ${buildout:package} [test,writefiles,readfiles,security]
eggs = gocept.pytestlayer
       pytest < 5
       pytest-cache
       pytest-cov
       pytest-rerunfailures < 8
       pytest-sugar
       pytest-flake8
       zipp < 2
       ${:test-eggs}

[scripts]
recipe = zc.recipe.egg
eggs = ${buildout:package} [test]
arguments = '${buildout:directory}/example.conf'
interpreter = python-gocept.amqprun

[omelette]
recipe = collective.recipe.omelette
eggs = ${pytest:test-eggs}
